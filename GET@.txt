<!--
  http://www.cyross.com/pc8801wiki/index.php/Template:Version を参照して記述
-->

{{Version
|n =未確認
|n0=未確認
|ns=未確認
|v1=ROM-BASIC<br/>DISK-BASIC
|v2=ROM-BASIC<br/>DISK-BASIC<br/>日本語BASIC
|v3=Version 3.0<br/>Version 3.1
|n9=未確認
|86=未確認
|ms=未確認
}}

<!-- 
  http://www.cyross.com/pc8801wiki/index.php/Template:CommandCategory を参照し、
  BASICリファレンス目次 http://www.cyross.com/pc8801wiki/index.php/BASIC%E3%83%AA%E3%83%95%E3%82%A1%E3%83%AC%E3%83%B3%E3%82%B9 
  の分類にしたがって記述
-->

{{CommandCategory
|cat1=★★要記入★★
|cat2=★★要記入★★
}}

== 機能 ==
★ですます調に変更してください。
矩形領域を画面から配列にコピー

== 書式 ==
<!-- 
  ヘルプ ( http://www.cyross.com/pc8801wiki/index.php/%E3%83%98%E3%83%AB%E3%83%97 ) を参照。
  ・[A]    Aを省略可
  ・<A|B>  AまたはBを指定
  ・{A}    Aを繰り返し指定可能。省略も可。
-->

★ 書式に省略可能な繰り返し [,引数...] が含まれている場合は、{,引数} に変更してください。
GET [ @ ] ( X1 , Y1 ) - ( X2 , Y2 ) , 配列変数名 [ ( 要素 ) ]

== 解説 ==

★なるべく、ですます調に変更してください。分量が多い場合はそのままで構いません。


グラフィック画面上の矩形領域を配列変数に読み込む。読み込んだ領域はPUT@により画面に描画できる。

左上を(X1,Y1)、右下を(X2,Y2)とする矩形領域を読み込む。座標はスクリーン座標系(VIEWを参照)。右下の座標はSTEP(X,Y)の形式(相対座標)としてもよい(POINT(最終描画位置設定)参照)。

読み込み先の配列変数名は、数値型の1次元配列を指定する。その配列変数に確保されたメモリのサイズが、矩形領域の取り込みに必要なメモリサイズ以上でなければならない。 矩形領域に必要なバイト数は次の式で求められる。矩形領域の幅(ドット)、高さ(ドット)に対し、
:<code>( ( 幅 + 7 ) \ 8 ) * 高さ * P + 4</code>
::白黒モード: P=1
::カラーモード: P=3

配列変数の要素1個あたりバイト数は以下のとおりなので、必要なバイト数から、必要な要素数が求められる。
; 整数型配列
: 2バイト
; 単精度実数型配列
: 4バイト
; 倍精度実数型配列
: 8バイト

したがって必要な要素数は、次の式で求められる。
:<code>( 必要なバイト数 + 要素1個のバイト数 - 1 ) \ 要素1個のバイト数</code>

たとえば、カラーモードで16×16ドットの領域を整数型配列に読み込む場合は、
:必要なバイト数:<code>((16+7)\8)*16*3+4 = 100</code>
:整数型配列に必要な要素数:<code>(100+2-1)\2 = 50</code>

以上の計算から、以下のプログラムで矩形領域を読み取れる。
<pre>
10 OPTION BASE 0          'デフォルトでOPTION BASE 0のため省略してもよい。
20 DIM A%(49)             '配列変数を宣言。要素は0から始まるため、
                          '0～49で50個の要素が確保される。
30 SCREEN 0               'グラフィック画面をカラーモードにする。
40 LINE(0,0)-(9,9),1,BF   'サンプルの図形を描画
50 LINE(6,6)-(15,15),2,BF
60 GET@(0,0)-(15,15),A%   '画面左上から幅、高さ16ドットの領域を取り込み
70 PUT@(100,100),A%,PSET  'その領域を100,100に描画      
</pre>

配列変数は連続したメモリ領域であり、その中のどこに読み込むかを要素で指定できる。 したがって、十分な要素数を確保すれば、1つの配列変数に複数の矩形領域を読み込むことが可能。
<pre>
100 DIM B%(99)                '16×16の読み込みに必要な2倍の要素数を宣言
110 GET@(0,0)-(15,15),B%(0)   '幅、高さ16ドットの領域を取り込み(1個目)
120 GET@(0,16)-(15,31),B%(50) '幅、高さ16ドットの領域を取り込み(2個目)
130 PUT@(100,100),B%(0),PSET  '1個目を描画
140 PUT@(116,100),B%(50),PSET '2個目を描画
</pre>


<!-- 「解説」内に例が含まれている場合には、余力があれば、以下の形式に書き改めてください。

== 例 ==

<code>AUTO</code>
* 10行目から10行刻みで行番号を発生させます。
<code>AUTO 500, 5</code>
* 500行目から5行刻みで行番号を発生させます。

== プログラム例 ==

全体をpreで囲む。不等号やアンパサンドはそのまま記述可。

<pre>
10 I = 10;
20 WHILE I>0 AND I<11 
30 PRINT "HELLO! PC-8001&PC-8801&PC-9801"
40 I = I - 1
50 WEND
</pre>

-->

== 参照 ==
★★以下の参照先は、BASICリファレンス目次 http://www.cyross.com/pc8801wiki/index.php/BASIC%E3%83%AA%E3%83%95%E3%82%A1%E3%83%AC%E3%83%B3%E3%82%B9 を参照して適切な名前に修正してください。
* [[PUT@]]
* [[VIEW]]
* [[POINT(最終描画位置設定)]]
