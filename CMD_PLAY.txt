<!--
  http://www.cyross.com/pc8801wiki/index.php/Template:Version を参照して記述
-->

{{Version
|n =未確認
|n0=未確認
|ns=未確認
|v1=拡張(ミュージックインタフェースボード)<br/>拡張(サウンドボード)<br/>拡張(サウンドボードⅡ, 初代/mkⅡのみ)
|v2=拡張(NEW CMD)<br/>拡張(ミュージックインタフェースボード)<br/>拡張(サウンドボード)<br/>拡張(サウンドボードⅡ)
|v3=Version 3.0<br/>Version 3.1
|n9=未確認
|86=未確認
|ms=未確認
}}

<!-- 
  http://www.cyross.com/pc8801wiki/index.php/Template:CommandCategory を参照し、
  BASICリファレンス目次 http://www.cyross.com/pc8801wiki/index.php/BASIC%E3%83%AA%E3%83%95%E3%82%A1%E3%83%AC%E3%83%B3%E3%82%B9 
  の分類にしたがって記述
-->

{{CommandCategory
|cat1=★★要記入★★
|cat2=★★要記入★★
}}

== 機能 ==
★ですます調に変更してください。
音楽を演奏

== 書式 ==
<!-- 
  ヘルプ ( http://www.cyross.com/pc8801wiki/index.php/%E3%83%98%E3%83%AB%E3%83%97 ) を参照。
  ・[A]    Aを省略可
  ・<A|B>  AまたはBを指定
  ・{A}    Aを繰り返し指定可能。省略も可。
-->

★ 書式に省略可能な繰り返し [,引数...] が含まれている場合は、{,引数} に変更してください。
CMD PLAY [ #音源モード , ] [ RML ; ] [ MMLチャンネル1 ] [ , MMLチャンネル2... ]

== 解説 ==

★なるべく、ですます調に変更してください。分量が多い場合はそのままで構いません。


音楽を演奏する。演奏内容はMML(Music Macro Language)で記述した文字列で与える。 チャンネルn(nは1～6)の演奏内容はMMLチャンネルnで指定する。RMLは音源モード5の場合のみ指定でき、リズム音源の演奏を指定する。

音源モード(省略時は2)
; 0
: [[拡張命令(ミュージックインタフェースボード)]] [[拡張命令(サウンドボード)]] [[拡張命令(サウンドボードⅡ)]] [[拡張命令(NEW CMD)]] ミュージックインタフェースボード(PC-8801-10)のPSG2個で演奏。全チャンネルSSG音源。
; 1
: [[拡張命令(ミュージックインタフェースボード)]] [[拡張命令(サウンドボード)]] [[拡張命令(サウンドボードⅡ)]] [[拡張命令(NEW CMD)]] ミュージックインタフェースボード(PC-8801-10)のMIDIインタフェース経由で演奏。
; 2
: [[拡張命令(サウンドボード)]] [[拡張命令(サウンドボードⅡ)]] [[拡張命令(NEW CMD)]] [[N88-日本語BASIC(V3)]] OPN/OPNAで演奏。チャンネル1～3がFM音源、4～6がSSG音源。([[拡張命令(サウンドボード)]] mkⅡSR以降でサウンドボード(PC-8801-11)の拡張命令利用時は、FM音源は本体内蔵、SSG音源はボード上のものを利用)
; 3
: [[拡張命令(サウンドボード)]] [[拡張命令(サウンドボードⅡ)]] [[拡張命令(NEW CMD)]] [[N88-日本語BASIC(V3)]] OPN/OPNAを効果音モードに設定。MMLのYコマンドを利用して音を出す。
; 4
: [[拡張命令(サウンドボード)]] [[拡張命令(サウンドボードⅡ)]] [[拡張命令(NEW CMD)]] [[N88-日本語BASIC(V3)]] OPN/OPNAをCSM(サイン波)モードに設定。MMLのYコマンドを利用して音を出す。
; 5
: [[拡張命令(サウンドボード)]] 本体内蔵OPNのFM音源(チャンネル1～3)とサウンドボード(PC-8801-11)上のOPNのFM音源(チャンネル4～6)で演奏。mkⅡSR以降でサウンドボード(PC-8801-11)の拡張命令利用時のみ。
; 5
: [[拡張命令(サウンドボードⅡ)]] [[N88-日本語BASIC(V3(サウンドボードⅡ対応))]] OPNAのFM音源(チャンネル1～6)で演奏。リズム音源の利用が可能。

MML (Music Macro Language)は、以下の表記で演奏内容を指定する。x,r,dは整数を表す。特に明記のない限り、すべての環境で利用可能。
{| class="wikitable"
|-
! 表記
! 意味
! デフォルト
|-
| Cx<br/>Dx<br/>Ex<br/>Fx<br/>Gx<br/>Ax<br/>Bx<br/>
| それぞれ、ド、レ、ミ、ファ、ソ、ラ、シの音程の音を出す。xは長さ(1～64)で、x分音符の長さとなる(例<code>C8</code> ⇒ 8分音符のド)。
| Lで指定の長さ
|-
| +
| シャープ。半音上げる。(例<code>G+4</code> ⇒ ソ# 4分音符)<br/>オクターブはまたがらないため、<code>O4B+</code>は<code>O5C</code>ではなく<code>O4C</code>となる。
| 
|-
| #
| シャープ。半音上げる。+と同じ。
| 
|-
| -
| フラット。半音下げる。オクターブはまたがらない。
| 
|-
| Ox
| オクターブ(1～8)。(例<code>O4CDEFGABO5C</code> ⇒ドから次のオクターブのドまで演奏)
| O4
|-
| >
| オクターブを1上げる。(例<code>O4CDEFGAB>C</code> ⇒ドから次のオクターブのドまで演奏)
| 
|-
| <
| オクターブを1下げる。
| 
|-
| Nx
| 音程x(0～96)の音を出す。0がO1C、96がO9C。<br/>ただし、FM音源ではN96はN0と同じ音程となる。
| xは省略不可
|-
| Rx
| 休符。xは長さで、音程(C～B)と同様。
| Lで指定の長さ
|-
| .
| 付点。長さに付加して使い、1.5倍にする。(例<code>C8.</code> ⇒ 付点8分音符)
| 
|-
| {...}x
| [[拡張命令(サウンドボード)]] [[拡張命令(サウンドボードⅡ)]] [[拡張命令(NEW CMD)]] [[N88-日本語BASIC(V3)]] 連符。長さxを{ } 内の音の数で割った長さでそれぞれ演奏する。(例<code>{CEG}4</code> ⇒ 3連符で、合計して4分音符の長さ)
| 
|-
| Lx
| 音の長さのデフォルト値を指定。xは長さで、音程(C～B)と同様。
| L4
|-
| Qx
| 指定された音の長さに対し、実際に音を出す長さを指定。x/8の長さの音を出し、残りの(8-x)/8は音を止める。
| Q8
|-
| &
| [[拡張命令(サウンドボード)]] [[拡張命令(サウンドボードⅡ)]] [[拡張命令(NEW CMD)]] [[N88-日本語BASIC(V3)]] タイ。前後の音をつなぐ。または、直前の音をQ8で演奏する。
| 
|-
| Vx
| 音量(0～15)。大きいほど音量も大きい。
| V8
|-
| @Vx
| [[拡張命令(サウンドボード)]] [[拡張命令(サウンドボードⅡ)]] [[拡張命令(NEW CMD)]] [[N88-日本語BASIC(V3)]] 音量(0～127)。大きいほど音量も大きい。Vより細かく指定できる。V0が@V85、V15が@V125に相当。<br/>(FM音源とMIDIのみ。)
| xは省略不可
|-
| Tx
| テンポ(32～255)。1分間に演奏する4分音符の個数。
| T120
|-
| @x
| [[拡張命令(サウンドボード)]] [[拡張命令(サウンドボードⅡ)]] [[拡張命令(NEW CMD)]] [[N88-日本語BASIC(V3)]] 音色を選択。音色番号は0～126。利用可能な番号の詳細は後述。 1～12は他のNEC製パソコンとの互換性のために用意された音色。 デフォルトの音色は@0。<br/>(FM音源のみ)
| xは省略不可
|-
| @L<br/>@R<br/>@M
| [[拡張命令(サウンドボードⅡ)]] [[N88-日本語BASIC(V3(サウンドボードⅡ対応))]] それぞれ、音を左チャンネルから、右チャンネルから、左右両方から出力。 デフォルトは@M。<br/>(FM音源のみ。)
| 
|-
| Mx
| SSG音源のエンベロープ周期(1～65535)。<br/>(SSG音源のみ)
| M255
|-
| Sx
| SSG音源のエンベロープ形状(0～15)。<br/>(SSG音源のみ)
| S1
|-
| Yr,d
| [[拡張命令(サウンドボード)]] [[拡張命令(サウンドボードⅡ)]] [[拡張命令(NEW CMD)]] [[N88-日本語BASIC(V3)]] OPN、OPNAのレジスタrに値dを出力。
| r,dは省略不可
|-
| Zd
| [[拡張命令(サウンドボード)]] [[拡張命令(サウンドボードⅡ)]] [[拡張命令(NEW CMD)]] [[N88-日本語BASIC(V3)]] MIDIに値dを出力。[[N88-日本語BASIC(V3)]] では利用不可。
| dは省略不可
|-
| @Wx
| [[拡張命令(サウンドボード)]] [[拡張命令(サウンドボードⅡ)]] [[拡張命令(NEW CMD)]] [[N88-日本語BASIC(V3)]] 長さxの間、現在の状態を維持。主に、Yで音を出した後に利用する。
| Lで指定の長さ
|}

[[拡張命令(サウンドボードⅡ)]] [[N88-日本語BASIC(V3(サウンドボードⅡ対応))]] RML (Rhythm Macro Language)は、以下の表記でリズム音源の演奏内容を指定する。nは整数を表す。省略可。
{| class="wikitable"
|-
! 表記
! 意味
! デフォルト
|-
| Vn
| 音量(0～63)。Xより前に記述が必要。
| V32
|-
| Xn
| 演奏するリズム番号(1～99)。リズム番号はCMD RHYTHMで登録する。
| 
|}

テンポはチャンネル1のテンポが適用される。リズム音源独自には指定できない。

MML、RMLの各コマンドのパラメータ(長さの指定含む)を変数で指定したい場合は、パラメータを「=変数名;」と指定する。
<pre>
"T=TMP;L4CDEF" ⇒ テンポを変数TMPで指定。 
</pre>

音色番号の範囲は次のとおり。
*[[拡張命令(NEW CMD)]] [[N88-日本語BASIC(V3)]] 0～61
*[[拡張命令(サウンドボード)]] PC-8801初代、mkⅡの場合は0～12または0～61。拡張命令組み込み時の問い合わせ“Do you need ALL voice data?” で y と回答すると61までとなる。mkⅡSR以降の場合は0～61。
*[[拡張命令(サウンドボードⅡ)]] PC-8801初代、mkⅡの場合は0～61。mkⅡSR以降の場合は0～61または0～126。BASIC起動時に拡張音色の利用を選択すると0～126となる。
*[[N88-日本語BASIC(V3(サウンドボードⅡ対応))]] 0～126

以下の機能は環境によっては利用できない。
*「=変数名;」形式のパラメータ指定は、PC-8801-10添付のプログラムで提供される拡張命令では利用不可。

使用例
<pre>
PLAY #2,"C","E","G","B",">D"  'ド ミ ソ シ １オクターブ上のレ の和音
                              'ド ミ ソはFM音源、残りはSSG音源
PLAY #5,"C","E","G","B",">D"  '同じ和音を、すべてFM音源で
</pre>


<!-- 「解説」内に例が含まれている場合には、余力があれば、以下の形式に書き改めてください。

== 例 ==

<code>AUTO</code>
* 10行目から10行刻みで行番号を発生させます。
<code>AUTO 500, 5</code>
* 500行目から5行刻みで行番号を発生させます。

== プログラム例 ==

全体をpreで囲む。不等号やアンパサンドはそのまま記述可。

<pre>
10 I = 10;
20 WHILE I>0 AND I<11 
30 PRINT "HELLO! PC-8001&PC-8801&PC-9801"
40 I = I - 1
50 WEND
</pre>

-->

== 参照 ==
★★以下の参照先は、BASICリファレンス目次 http://www.cyross.com/pc8801wiki/index.php/BASIC%E3%83%AA%E3%83%95%E3%82%A1%E3%83%AC%E3%83%B3%E3%82%B9 を参照して適切な名前に修正してください。
* [[CMD RHYTHM]]
